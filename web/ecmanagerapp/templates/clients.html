<div class="col-12">
    <div class="card shadow-lg mb-5">
        <div class="card-header bg-primary text-white py-3">
            <h2 class="h5 mb-0 d-flex align-items-center">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="bi bi-people-fill me-2" viewBox="0 0 16 16">
                  <path d="M7 14s-1 0-1-1 1-4 5-4 5 3 5 4-1 1-1 1zm-4 1s-1 0-1-1 1-4 5-4 5 3 5 4-1 1-1 1z"/>
                  <path fill-rule="evenodd" d="M12 2a1 1 0 0 0-1-1H3a1 1 0 0 0-1 1v12a1 1 0 0 0 1 1h8a1 1 0 0 0 1-1V2zm-2 11a1 1 0 1 1-2 0 1 1 0 0 1 2 0m2-6a1 1 0 1 1 0-2 1 1 0 0 1 0 2"/>
                </svg>
                All Client Leads
                <span class="badge bg-secondary ms-2 rounded-pill">{{ kpi_total_clients|default:0 }} Total</span>
            </h2>
        </div>

        <div class="card-body p-0">
            <!-- Responsive wrapper for the table -->
            <div class="table-responsive">
                <table class="table table-striped table-hover mb-0">
                    <thead class="table-light">
                        <tr>
                            <th scope="col" class="text-uppercase">Client Name</th>
                            <th scope="col" class="text-uppercase">Primary Contact</th>
                            <th scope="col" class="text-uppercase d-none d-sm-table-cell">Secondary Contact</th>
                            <th scope="col" class="text-uppercase">Logged By</th>
                            <th scope="col" class="text-uppercase d-none d-md-table-cell">Date Logged</th>
                            <th scope="col" class="text-center text-uppercase">Actions</th>
                        </tr>
                    </thead>
                    <tbody id="client-table-body">
                        {% if clients %}
                            {% for client in clients %}
                                <tr data-client-id="{{ client.id }}">
                                    <td class="align-middle text-nowrap fw-bold">{{ client.fullName }}</td>
                                    <td class="align-middle">{{ client.contact1 }}</td>
                                    <td class="align-middle d-none text-nowrap d-sm-table-cell">{{ client.contact2|default:'N/A' }}</td>
                                    <td class="align-middle text-primary text-nowrap fw-medium">{{ client.distributor_name }}</td>
                                    <td class="align-middle text-muted text-nowrap d-none d-md-table-cell">{{ client.date_logged_formatted }}</td>
                                    <td class="align-middle text-center text-nowrap">
                                        <button type="button" class="btn btn-sm btn-outline-info view-notes-btn"
                                            data-notes="{{ client.initialNotes|default:'No notes provided.' }}">
                                            View Notes
                                        </button>
                                    </td>
                                </tr>
                            {% endfor %}
                        {% else %}
                            <tr>
                                <td colspan="6" class="text-center text-muted py-4">
                                    <i class="bi bi-info-circle me-2"></i> No client leads logged yet.
                                </td>
                            </tr>
                        {% endif %}
                    </tbody>
                </table>
            </div>
        </div>
        <!-- Optional Card Footer for pagination or summary -->
        <div class="card-footer text-muted text-end">
            Displaying {{ clients|length }} of {{ kpi_total_clients|default:0 }} total leads.
        </div>
    </div>
</div>



   <script type="module">
        // Sidebar Toggle
        window.toggleSidebar = function() {
            const sidebar = document.getElementById('sidebar');
            sidebar.classList.toggle('-translate-x-full');
        }

        $(document).ready(function() {
            // Handle "View Notes" button clicks (purely UI interaction)
            $(document).on('click', '.view-notes-btn', function() {
                // Read the notes content directly from the data attribute set by the Django view
                const notes = $(this).data('notes');
                // IMPORTANT: Using alert() as a simple message box alternative
                alert(`Client Notes:\n\n${notes}`);
            });

            // --- Navigation Link Active State Handler ---
            $('.nav-link').on('click', function(e) {
                // Simple navigation link styling logic
                $('.nav-link').removeClass('active-nav-link');
                $(this).addClass('active-nav-link');

                if (window.innerWidth < 768) {
                    toggleSidebar();
                }
            });
        });
    </script>



